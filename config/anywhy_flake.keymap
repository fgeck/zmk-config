//
//                 ╭───────────────────────────────────────────────────────────╮
//                 │       █████╗ ███╗   ██╗██╗   ██╗██╗    ██╗██╗  ██╗██╗   ██╗│
//                 │      ██╔══██╗████╗  ██║╚██╗ ██╔╝██║    ██║██║  ██║╚██╗ ██╔╝│
//                 │      ███████║██╔██╗ ██║ ╚████╔╝ ██║ █╗ ██║███████║ ╚████╔╝ │
//                 │      ██╔══██║██║╚██╗██║  ╚██╔╝  ██║███╗██║██╔══██║  ╚██╔╝  │
//                 │      ██║  ██║██║ ╚████║   ██║   ╚███╔███╔╝██║  ██║   ██║   │
//                 │      ╚═╝  ╚═╝╚═╝  ╚═══╝   ╚═╝    ╚══╝╚══╝ ╚═╝  ╚═╝   ╚═╝   │
//                 │                      F L A K E   M                         │
//                 ╰───────────────────────────────────────────────────────────╯
//
// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
//
//   Keymap uses Flake L format (58 bindings) for compatibility.
//   On Flake M hardware (46 keys), Row 0 is not physically present - those bindings are ignored.
//
//   ┏━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━┓             ┏━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━┳━━━━━━━┓
//   ┃   0   ┃   1   ┃   2   ┃   3   ┃   4   ┃   5   ┃             ┃   6   ┃   7   ┃   8   ┃   9   ┃  10   ┃  11   ┃  <- Row 0 (L only)
//   ┣━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┫             ┣━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┫
//   ┃  12   ┃  13   ┃  14   ┃  15   ┃  16   ┃  17   ┃             ┃  18   ┃  19   ┃  20   ┃  21   ┃  22   ┃  23   ┃  <- Row 1 (M top row)
//   ┣━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┫             ┣━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┫
//   ┃  24   ┃  25   ┃  26   ┃  27   ┃  28   ┃  29   ┃             ┃  30   ┃  31   ┃  32   ┃  33   ┃  34   ┃  35   ┃
//   ┣━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┫             ┣━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┫
//   ┃  36   ┃  37   ┃  38   ┃  39   ┃  40   ┃  41   ┃             ┃  42   ┃  43   ┃  44   ┃  45   ┃  46   ┃  47   ┃
//   ┗━━━━━━━┻━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┓ ┏━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━╋━━━━━━━┻━━━━━━━┛
//                   ┃  48   ┃  49   ┃  50   ┃  51   ┃  52   ┃ ┃  53   ┃  54   ┃  55   ┃  56   ┃  57   ┃
//                   ┗━━━━━━━┻━━━━━━━┻━━━━━━━┻━━━━━━━┻━━━━━━━┛ ┗━━━━━━━┻━━━━━━━┻━━━━━━━┻━━━━━━━┻━━━━━━━┛
//
// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄

#include <behaviors.dtsi>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/keys.h>

// ─────────────────────────────────────────────────────────────────────────────
// Configuration
// ─────────────────────────────────────────────────────────────────────────────
#define TAP_DANCE_TERM 180
#define QUICK_TAP_MS 175

// Key position groups for HRM (Flake L format, 58 keys)
// Row 0: 0-11 (L only), Row 1: 12-23, Row 2: 24-35, Row 3: 36-47, Thumbs: 48-57
#define KEYS_L 12 13 14 15 16 17 24 25 26 27 28 29 36 37 38 39 40 41
#define KEYS_R 18 19 20 21 22 23 30 31 32 33 34 35 42 43 44 45 46 47
#define THUMBS 48 49 50 51 52 53 54 55 56 57

// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
//
//   Tap-Dance Behaviors (double-tap for alternate):
//     - a → ä    - o → ö    - u → ü   (German umlauts via Option+key, requires "U.S. with German Umlauts" layout)
//     - ; → :    - ' → "    - - → ~
//     - / → ?    - , → <    - . → >
//     - [ → {    - ] → }
//
// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄

/ {
    behaviors {
        // ─────────────────────────────────────────────────────────────────────────────
        // Home Row Mods - urob's "timeless" configuration
        // Left hand: triggers on right hand keys + thumbs
        // Right hand: triggers on left hand keys + thumbs
        //
        // TUNING GUIDE:
        // ┌─────────────────────────┬────────────────────────────────────────────────┐
        // │ Problem                 │ Solution                                       │
        // ├─────────────────────────┼────────────────────────────────────────────────┤
        // │ Accidental holds when   │ Increase require-prior-idle-ms (e.g., 175)    │
        // │ typing fast             │ or increase tapping-term-ms (e.g., 300)       │
        // ├─────────────────────────┼────────────────────────────────────────────────┤
        // │ Hard to trigger holds   │ Decrease tapping-term-ms (e.g., 250)          │
        // │ (mod doesn't activate)  │ or decrease require-prior-idle-ms (e.g., 100) │
        // ├─────────────────────────┼────────────────────────────────────────────────┤
        // │ Same-hand combos fail   │ Add problem key positions to                  │
        // │ (e.g., Ctrl+S)          │ hold-trigger-key-positions                    │
        // ├─────────────────────────┼────────────────────────────────────────────────┤
        // │ Double-tap repeat slow  │ Decrease quick-tap-ms (e.g., 150)             │
        // ├─────────────────────────┼────────────────────────────────────────────────┤
        // │ Rolls trigger holds     │ Remove hold-trigger-on-release                │
        // │ (typing "sd" = Ctrl+D)  │ (but this makes intentional holds harder)     │
        // └─────────────────────────┴────────────────────────────────────────────────┘
        //
        // Current values (urob's timeless defaults):
        //   tapping-term-ms = 280    - Time to hold before mod activates
        //   quick-tap-ms = 175       - Window for double-tap to repeat key
        //   require-prior-idle-ms = 150 - Ignore hold if typed recently (anti-misfires)
        // ─────────────────────────────────────────────────────────────────────────────
        hml: home_row_mod_left {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            flavor = "balanced";
            tapping-term-ms = <280>;
            quick-tap-ms = <QUICK_TAP_MS>;
            require-prior-idle-ms = <150>;
            bindings = <&kp>, <&kp>;
            hold-trigger-key-positions = <KEYS_R THUMBS>;
            hold-trigger-on-release;
        };

        hmr: home_row_mod_right {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            flavor = "balanced";
            tapping-term-ms = <280>;
            quick-tap-ms = <QUICK_TAP_MS>;
            require-prior-idle-ms = <150>;
            bindings = <&kp>, <&kp>;
            hold-trigger-key-positions = <KEYS_L THUMBS>;
            hold-trigger-on-release;
        };

        // HRM variants for tap-dance keys (A→ä on left, ;→: on right)
        hml_td_a: home_row_mod_left_td_a {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            flavor = "balanced";
            tapping-term-ms = <280>;
            quick-tap-ms = <QUICK_TAP_MS>;
            require-prior-idle-ms = <150>;
            bindings = <&kp>, <&td_a>;
            hold-trigger-key-positions = <KEYS_R THUMBS>;
            hold-trigger-on-release;
        };

        hmr_td_semi: home_row_mod_right_td_semi {
            compatible = "zmk,behavior-hold-tap";
            #binding-cells = <2>;
            flavor = "balanced";
            tapping-term-ms = <280>;
            quick-tap-ms = <QUICK_TAP_MS>;
            require-prior-idle-ms = <150>;
            bindings = <&kp>, <&td_semi>;
            hold-trigger-key-positions = <KEYS_L THUMBS>;
            hold-trigger-on-release;
        };
    };

    combos {
        compatible = "zmk,combos";

        bt_sel_3 {
            bindings = <&bt3>;
            key-positions = <42 30>;
            layers = <3>;
        };

        bt_sel_4 {
            bindings = <&bt4>;
            key-positions = <30 18>;
            layers = <3>;
        };
    };

    macros {
        umlaut_a: umlaut_a {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LA(A)>;
            label = "UMLAUT_A";
        };

        umlaut_o: umlaut_o {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LA(O)>;
            label = "UMLAUT_O";
        };

        umlaut_u: umlaut_u {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LA(U)>;
            label = "UMLAUT_U";
        };

        bt_clr_0: bt_clr_0 {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&bt BT_SEL 0 &bt BT_CLR>;
            label = "BT_CLR_0";
        };

        bt_clr_1: bt_clr_1 {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&bt BT_SEL 1 &bt BT_CLR>;
            label = "BT_CLR_1";
        };

        bt_clr_2: bt_clr_2 {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&bt BT_SEL 2 &bt BT_CLR>;
            label = "BT_CLR_2";
        };

        bt_clr_3: bt_clr_3 {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&bt BT_SEL 3 &bt BT_CLR>;
            label = "BT_CLR_3";
        };

        bt_clr_4: bt_clr_4 {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&bt BT_SEL 4 &bt BT_CLR>;
            label = "BT_CLR_4";
        };

        // ─────────────────────────────────────────────────────────────────────────────
        // Macros for IntelliJ (Idea layer)
        // ─────────────────────────────────────────────────────────────────────────────

        // Double-Shift (Search Everywhere in IntelliJ)
        double_shift: double_shift {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LSHFT &kp LSHFT>;
            label = "DOUBLE_SHIFT";
        };

        // CMD+SHIFT+F (Find in Files)
        idea_find: idea_find {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LG(LS(F))>;
            label = "IDEA_FIND";
        };

        // CMD+SHIFT+R (Replace in Files)
        idea_replace: idea_replace {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LG(LS(R))>;
            label = "IDEA_REPLACE";
        };

        // OPT+CMD+← (Navigate Back)
        idea_back: idea_back {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LA(LG(LEFT))>;
            label = "IDEA_BACK";
        };

        // OPT+CMD+→ (Navigate Forward)
        idea_fwd: idea_fwd {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LA(LG(RIGHT))>;
            label = "IDEA_FWD";
        };

        // CMD+SHIFT+B (Go to Implementation)
        idea_impl: idea_impl {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LG(LS(B))>;
            label = "IDEA_IMPL";
        };

        // ─────────────────────────────────────────────────────────────────────────────
        // Macros for FN layer (Lock screen)
        // ─────────────────────────────────────────────────────────────────────────────

        // CMD+CTRL+Q (Lock Screen on macOS)
        mac_lock: mac_lock {
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings = <&kp LG(LC(Q))>;
            label = "MAC_LOCK";
        };
    };

    behaviors {
        bt0: bt0 {
            compatible = "zmk,behavior-mod-morph";
            label = "BT0";
            bindings = <&bt BT_SEL 0>, <&bt_clr_0>;
            #binding-cells = <0>;
            mods = <(MOD_LSFT|MOD_RSFT)>;
        };

        bt1: bt1 {
            compatible = "zmk,behavior-mod-morph";
            label = "BT1";
            bindings = <&bt BT_SEL 1>, <&bt_clr_1>;
            #binding-cells = <0>;
            mods = <(MOD_LSFT|MOD_RSFT)>;
        };

        bt2: bt2 {
            compatible = "zmk,behavior-mod-morph";
            label = "BT2";
            bindings = <&bt BT_SEL 2>, <&bt_clr_2>;
            #binding-cells = <0>;
            mods = <(MOD_LSFT|MOD_RSFT)>;
        };

        bt3: bt3 {
            compatible = "zmk,behavior-mod-morph";
            label = "BT3";
            bindings = <&bt BT_SEL 3>, <&bt_clr_3>;
            #binding-cells = <0>;
            mods = <(MOD_LSFT|MOD_RSFT)>;
        };

        bt4: bt4 {
            compatible = "zmk,behavior-mod-morph";
            label = "BT4";
            bindings = <&bt BT_SEL 4>, <&bt_clr_4>;
            #binding-cells = <0>;
            mods = <(MOD_LSFT|MOD_RSFT)>;
        };

        td_a: td_a {
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp A>, <&umlaut_a>;
        };

        td_o: td_o {
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp O>, <&umlaut_o>;
        };

        td_u: td_u {
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp U>, <&umlaut_u>;
        };

        // ─────────────────────────────────────────────────────────────────────────
        // Tap-Dance: Punctuation (double-tap for shifted variant)
        // ─────────────────────────────────────────────────────────────────────────
        td_semi: td_semi {  // ; → :
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp SEMI>, <&kp COLON>;
        };

        td_apos: td_apos {  // ' → "
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp APOS>, <&kp DQT>;
        };

        td_minus: td_minus {  // - → ~
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp MINUS>, <&kp TILDE>;
        };

        td_fslh: td_fslh {  // / → ?
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp FSLH>, <&kp QMARK>;
        };

        td_comma: td_comma {  // , → <
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp COMMA>, <&kp LT>;
        };

        td_dot: td_dot {  // . → >
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp DOT>, <&kp GT>;
        };

        td_lbkt: td_lbkt {  // [ → {
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp LBKT>, <&kp LBRC>;
        };

        td_rbkt: td_rbkt {  // ] → }
            compatible = "zmk,behavior-tap-dance";
            #binding-cells = <0>;
            tapping-term-ms = <TAP_DANCE_TERM>;
            bindings = <&kp RBKT>, <&kp RBRC>;
        };
    };

    keymap {
        compatible = "zmk,keymap";

        base {
// ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
            display-name = "Base";
// ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
//         ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓                     ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓
//         ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃                     ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃  <- Row 0: L only (not on M)
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃  ENTER  ┃    Q    ┃    W    ┃    E    ┃    R    ┃    T    ┃                     ┃    Y    ┃   U/Ü   ┃    I    ┃   O/Ö   ┃    P    ┃  BSPC   ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃   TAB   ┃   A/Ä   ┃    S    ┃    D    ┃    F    ┃    G    ┃                     ┃    H    ┃    J    ┃    K    ┃    L    ┃   ;/:   ┃   '/"   ┃
//         ┃         ┃   GUI   ┃   ALT   ┃  CTRL   ┃  SHIFT  ┃         ┃                     ┃         ┃  SHIFT  ┃  CTRL   ┃   ALT   ┃   GUI   ┃         ┃  <- HRM (Miryoku)
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃   [/{   ┃    Z    ┃    X    ┃    C    ┃    V    ┃    B    ┃                     ┃    N    ┃    M    ┃   ,/<   ┃   ./>   ┃   //?   ┃   ]/}   ┃
//         ┗━━━━━━━━━┻━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┓ ┏━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┻━━━━━━━━━┛
//                             ┃  Idea   ┃   ALT   ┃   GUI   ┃  SPACE  ┃   NAV   ┃ ┃   NUM   ┃  SHIFT  ┃   GUI   ┃   ALT   ┃   FN    ┃
//                             ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛ ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛
//
//         Tap-Dance: a→ä, o→ö, u→ü, ;→:, '→", [→{, ]→}, ,→<, .→>, /→?
            bindings = <
// ╷         ╷         ╷         ╷         ╷         ╷         ╷   ╷         ╷         ╷         ╷         ╷         ╷         ╷
&none       &none     &none     &none      &none      &none          &none    &none     &none      &none      &none      &none
&kp ENTER   &kp Q     &kp W     &kp E      &kp R      &kp T          &kp Y    &td_u     &kp I      &td_o      &kp P      &kp BSPC
&kp TAB     &hml_td_a LGUI 0  &hml LALT S  &hml LCTRL D  &hml LSHFT F  &kp G    &kp H  &hmr RSHFT J  &hmr RCTRL K  &hmr LALT L  &hmr_td_semi RGUI 0  &td_apos
&td_lbkt    &kp Z     &kp X     &kp C      &kp V      &kp B          &kp N    &kp M     &td_comma  &td_dot    &td_fslh   &td_rbkt
            &mo 4     &kp LALT  &kp LGUI   &kp SPACE  &mo 2          &mo 1    &kp LSHFT &kp RGUI   &kp RALT   &mo 3
            >;
        };
// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄

        num {
// ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
            display-name = "Num";
// ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
//         ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓                     ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓
//         ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃                     ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃  <- Row 0: L only (not on M)
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃  ENTER  ┃    7    ┃    8    ┃    9    ┃    +    ┃    -    ┃                     ┃         ┃         ┃         ┃         ┃         ┃  BSPC   ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃   TAB   ┃    4    ┃    5    ┃    6    ┃    *    ┃    /    ┃                     ┃         ┃ sk_SHFT ┃ sk_CTRL ┃ sk_ALT  ┃ sk_GUI  ┃         ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃    =    ┃    1    ┃    2    ┃    3    ┃    0    ┃    .    ┃                     ┃         ┃         ┃         ┃         ┃         ┃   ESC   ┃
//         ┗━━━━━━━━━┻━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┓ ┏━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┻━━━━━━━━━┛
//                             ┃  Idea   ┃   ALT   ┃   GUI   ┃  SPACE  ┃   NAV   ┃ ┃  ████   ┃  SHIFT  ┃   GUI   ┃   ALT   ┃   FN    ┃
//                             ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛ ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛
            bindings = <
// ╷         ╷         ╷         ╷         ╷         ╷         ╷   ╷         ╷         ╷         ╷         ╷         ╷         ╷
&none       &none     &none     &none      &none      &none          &none   &none      &none      &none     &none     &none
&kp ENTER   &kp N7    &kp N8    &kp N9     &kp PLUS   &kp MINUS      &none   &none      &none      &none     &none     &kp BSPC
&kp TAB     &kp N4    &kp N5    &kp N6     &kp ASTRK  &kp FSLH       &none   &sk LSHFT  &sk LCTRL  &sk LALT  &sk LGUI  &none
&kp EQUAL   &kp N1    &kp N2    &kp N3     &kp N0     &kp DOT        &none   &none      &none      &none     &none     &kp ESC
            &trans    &trans    &trans     &trans     &mo 2          &none   &trans     &trans     &trans    &trans
            >;
        };

// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄

        nav {
// ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
            display-name = "Nav";
// ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
//         ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓                     ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓
//         ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃                     ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃  <- Row 0: L only (not on M)
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃  ENTER  ┃         ┃         ┃         ┃         ┃         ┃                     ┃  Redo   ┃  Paste  ┃  Copy   ┃   Cut   ┃  Undo   ┃  BSPC   ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃   TAB   ┃ sk_GUI  ┃ sk_ALT  ┃ sk_CTRL ┃ sk_SHFT ┃         ┃                     ┃    ←    ┃    ↓    ┃    ↑    ┃    →    ┃         ┃         ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃         ┃         ┃         ┃         ┃         ┃         ┃                     ┃         ┃  Home   ┃  PgDn   ┃  PgUp   ┃   End   ┃   ESC   ┃
//         ┗━━━━━━━━━┻━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┓ ┏━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┻━━━━━━━━━┛
//                             ┃  Idea   ┃   ALT   ┃   GUI   ┃  SPACE  ┃  ████   ┃ ┃   NUM   ┃  SHIFT  ┃   GUI   ┃   ALT   ┃   FN    ┃
//                             ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛ ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛
//
//         Clipboard: macOS uses Cmd (LG) - Redo=Cmd+Shift+Z, Paste=Cmd+V, Copy=Cmd+C, Cut=Cmd+X, Undo=Cmd+Z
            bindings = <
// ╷           ╷         ╷         ╷          ╷          ╷         ╷   ╷            ╷         ╷         ╷         ╷         ╷         ╷
&none        &none      &none      &none      &none      &none          &none        &none      &none      &none      &none      &none
&kp ENTER    &none      &none      &none      &none      &none          &kp LG(LS(Z)) &kp LG(V) &kp LG(C)  &kp LG(X)  &kp LG(Z)  &kp BSPC
&kp TAB      &sk LGUI   &sk LALT   &sk LCTRL  &sk LSHFT  &none          &kp LEFT     &kp DOWN   &kp UP     &kp RIGHT  &none      &none
&none        &none      &none      &none      &none      &none          &none        &kp HOME   &kp PG_DN  &kp PG_UP  &kp END    &kp ESC
             &trans     &trans     &trans     &trans     &none          &mo 1        &trans     &trans     &trans     &trans
            >;
        };

// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄

        fn {
// ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
            display-name = "Fn";
// ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
//         ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓                     ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓
//         ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃                     ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃  <- Row 0: L only (not on M)
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃         ┃  Vol+   ┃  Vol-   ┃  Mute   ┃         ┃         ┃                     ┃   BT2   ┃   F9    ┃  F10    ┃  F11    ┃  F12    ┃         ┃
//         ┃         ┃         ┃         ┃         ┃         ┃         ┃                     ┃ Clr_BT2 ┃         ┃         ┃         ┃         ┃         ┃  <- shifted
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃         ┃  Next   ┃  Prev   ┃  Play   ┃         ┃ SOFTOFF ┃                     ┃   BT1   ┃   F5    ┃   F6    ┃   F7    ┃   F8    ┃         ┃
//         ┃         ┃         ┃         ┃         ┃         ┃         ┃                     ┃ Clr_BT1 ┃         ┃         ┃         ┃         ┃         ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃         ┃  BRI+   ┃  BRI-   ┃  Lock   ┃         ┃ STUDIO  ┃                     ┃   BT0   ┃   F1    ┃   F2    ┃    F3   ┃   F4    ┃         ┃
//         ┃         ┃         ┃         ┃         ┃         ┃         ┃                     ┃ Clr_BT0 ┃         ┃         ┃         ┃         ┃         ┃
//         ┗━━━━━━━━━┻━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┓ ┏━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┻━━━━━━━━━┛
//                             ┃  Idea   ┃   ALT   ┃   GUI   ┃  SPACE  ┃   NAV   ┃ ┃   NUM   ┃  SHIFT  ┃   GUI   ┃   ALT   ┃  ████   ┃
//                             ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛ ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛
//
//         BT0/1/2: Tap to select profile, Shift+Tap to clear
            bindings = <
// ╷           ╷              ╷              ╷           ╷         ╷                ╷   ╷         ╷         ╷         ╷         ╷         ╷         ╷
&none        &none          &none          &none        &none      &none                &none     &none      &none      &none      &none      &none
&none        &kp C_VOL_UP   &kp C_VOL_DN   &kp C_MUTE   &none      &none                &bt2      &kp F9     &kp F10    &kp F11    &kp F12    &none
&none        &kp C_NEXT     &kp C_PREV     &kp C_PP     &none      &soft_off            &bt1      &kp F5     &kp F6     &kp F7     &kp F8     &none
&none        &kp C_BRI_UP   &kp C_BRI_DN   &mac_lock    &none      &studio_unlock       &bt0      &kp F1     &kp F2     &kp F3     &kp F4     &none
             &trans         &trans         &trans       &trans     &mo 2                &mo 1     &trans     &trans     &trans     &none
            >;
        };

// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄

        idea {
// ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
            display-name = "Idea";
// ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
//                                In-IntelliJ-Navigation                                                          In-IntelliJ-Edit/Nav
//         ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓                     ┏╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┳╍╍╍╍╍╍╍╍╍┓
//         ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃                     ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃ ------  ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃  ENTER  ┃ CMD+1   ┃ CMD+2   ┃ CMD+3   ┃ CMD+4   ┃  CMD+5  ┃                     ┃OPT+CMD+←┃OPT+CMD+→┃ CMD+B   ┃CMD+Shift┃         ┃  BSPC   ┃
//         ┃         ┃         ┃         ┃         ┃         ┃         ┃                     ┃ go back ┃go forwd.┃         ┃   + B   ┃         ┃         ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃   TAB   ┃ CMD+    ┃ CMD+    ┃ CMD+    ┃ CMD+    ┃ CMD+    ┃                     ┃  F2     ┃         ┃         ┃         ┃         ┃         ┃
//         ┃         ┃ Shift+1 ┃ Shift+2 ┃ Shift+3 ┃ Shift+4 ┃ Shift+5 ┃                     ┃ go err  ┃         ┃         ┃         ┃         ┃         ┃
//         ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫                     ┣━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┫
//         ┃         ┃ CTRL+1  ┃ CTRL+2  ┃ CTRL+3  ┃ CTRL+4  ┃ CTRL+5  ┃                     ┃ 2xShift ┃CMD+SHIFT┃CMD+SHIFT┃ CTRL+T  ┃         ┃  ESC    ┃
//         ┃         ┃         ┃         ┃         ┃         ┃         ┃                     ┃         ┃  +F     ┃  +R     ┃         ┃         ┃         ┃
//         ┗━━━━━━━━━┻━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┓ ┏━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━╋━━━━━━━━━┻━━━━━━━━━┛
//                             ┃  ████   ┃   ALT   ┃   GUI   ┃  SPACE  ┃   NAV   ┃ ┃   NUM   ┃  SHIFT  ┃   GUI   ┃   ALT   ┃   FN    ┃
//                             ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛ ┗━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┻━━━━━━━━━┛
//
//         IntelliJ shortcuts for macOS
            bindings = <
// ╷           ╷            ╷            ╷            ╷            ╷            ╷   ╷              ╷              ╷              ╷            ╷         ╷         ╷
&none        &none        &none        &none        &none        &none             &none          &none          &none          &none        &none      &none
&kp ENTER    &kp LG(N1)   &kp LG(N2)   &kp LG(N3)   &kp LG(N4)   &kp LG(N5)        &idea_back     &idea_fwd      &kp LG(B)      &idea_impl   &none      &kp BSPC
&kp TAB      &kp LG(LS(N1)) &kp LG(LS(N2)) &kp LG(LS(N3)) &kp LG(LS(N4)) &kp LG(LS(N5))  &kp F2   &none          &none          &none        &none      &none
&none        &kp LC(N1)   &kp LC(N2)   &kp LC(N3)   &kp LC(N4)   &kp LC(N5)        &double_shift  &idea_find     &idea_replace  &kp LC(T)    &none      &kp ESC
             &none        &trans       &trans       &trans       &mo 2             &mo 1          &trans         &trans         &trans       &trans
            >;
        };
    };
};
